# Telegram Checkin Bot

ä¸€ä¸ªåŸºäº **Telethon** + **Apscheduler** çš„ **Telegram è‡ªåŠ¨ç­¾åˆ°æœºå™¨äºº**ã€‚  
æ”¯æŒä½¿ç”¨ **ä¸ªäººè´¦å·** å®Œæˆç­¾åˆ°ï¼Œè€Œä¸æ˜¯ Bot API ç›´æ¥å‘æ¶ˆæ¯ã€‚  

## âœ¨ åŠŸèƒ½ç‰¹ç‚¹

- ğŸ¤– **Bot ç®¡ç†**ï¼šæ‰€æœ‰ä»»åŠ¡å’Œè´¦å·ç®¡ç†éƒ½é€šè¿‡ä¸€ä¸ª Bot å®Œæˆ
- ğŸ‘¥ **å¤šè´¦å·æ”¯æŒ**ï¼šå¯åŒæ—¶ç™»å½•å¤šä¸ª Telegram ä¸ªäººå·
- â° **çµæ´»å®šæ—¶**ï¼šåŸºäº Cron è¡¨è¾¾å¼ï¼ˆä¸Šæµ·æ—¶åŒºï¼‰
- ğŸ“ **ä»»åŠ¡å¤‡æ³¨**ï¼šæ¯ä¸ªä»»åŠ¡å¯å¸¦å¤‡æ³¨ï¼Œæ–¹ä¾¿åŒºåˆ†
- ğŸ“Š **çŠ¶æ€ç›‘æ§**ï¼šéšæ—¶æŸ¥çœ‹è´¦å·å®æ—¶çŠ¶æ€ï¼ˆåœ¨çº¿/ç¦»çº¿/æœ€è¿‘ä¸Šçº¿ï¼‰
- ğŸ” **ç‹¬ç«‹è¿è¡Œç¯å¢ƒ**ï¼šè‡ªåŠ¨åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼Œä¾èµ–ä¸ç³»ç»Ÿéš”ç¦»
- âš™ï¸ **ä¸€é”®éƒ¨ç½²**ï¼š`install.sh` å®‰è£…å¹¶æ³¨å†Œ systemd æœåŠ¡ï¼Œå¼€æœºè‡ªå¯
- ğŸ“¦ **å¹²å‡€å¸è½½**ï¼š`uninstall.sh` ç§»é™¤æœåŠ¡ä¸æ•°æ®

---

## ğŸš€ å®‰è£…éƒ¨ç½²

### 1. å…‹éš†ä»“åº“
```bash
git clone https://github.com/kelenetwork/telegram-checkin-bot.git
cd telegram-checkin-bot
```

### 2. ä¸€é”®å®‰è£…
```bash
sudo bash install.sh
```

è„šæœ¬ä¼šå®Œæˆï¼š
- å®‰è£…ç³»ç»Ÿä¾èµ–ï¼ˆPython3/venv/tzdata/git ç­‰ï¼‰
- åˆ›å»ºè¿è¡Œç”¨æˆ· `tgcheckin`
- éƒ¨ç½²åˆ° `/opt/tg-checkin`
- åˆ›å»ºè™šæ‹Ÿç¯å¢ƒå¹¶å®‰è£… `telethon`ã€`apscheduler`
- æ³¨å†Œ `systemd` æœåŠ¡ï¼Œå¼€æœºè‡ªå¯
- é¦–æ¬¡è¿è¡Œ `main.py` å¼•å¯¼ä½ è¾“å…¥ï¼š
  - `api_id` / `api_hash`ï¼ˆ[my.telegram.org](https://my.telegram.org) ç”³è¯·ï¼‰
  - ç®¡ç† Bot çš„ `bot_token`ï¼ˆ@BotFather è·å–ï¼‰
  - ç®¡ç†å‘˜è´¦å· IDï¼ˆå¯åœ¨ [@userinfobot](https://t.me/userinfobot) æŸ¥è¯¢ï¼‰

---

## ğŸ›  ç®¡ç†è„šæœ¬

ä»“åº“æä¾› `manage.sh`ï¼Œç®€åŒ–æ—¥å¸¸ç®¡ç†ï¼š

```bash
bash manage.sh start     # å¯åŠ¨æœåŠ¡
bash manage.sh stop      # åœæ­¢æœåŠ¡
bash manage.sh restart   # é‡å¯æœåŠ¡
bash manage.sh status    # æŸ¥çœ‹çŠ¶æ€
bash manage.sh logs      # å®æ—¶æ—¥å¿—
bash manage.sh edit      # ç¼–è¾‘ config.json
bash manage.sh update    # ä»ä»“åº“æ›´æ–°åˆ° /opt å¹¶é‡å¯
```

---

## ğŸ“– ä½¿ç”¨è¯´æ˜

åœ¨ Telegram ä¸­ï¼Œç”¨ç®¡ç†å‘˜è´¦å·å‘ç®¡ç† Bot å‘é€å‘½ä»¤ã€‚

### è´¦å·ç®¡ç†
```
/adduser åˆ«å | +8613800138000     # æ·»åŠ è´¦å·ï¼ˆä¼šå‘é€éªŒè¯ç åˆ°æ‰‹æœºï¼‰
/code åˆ«å | 12345                 # è¾“å…¥éªŒè¯ç 
/pass åˆ«å | äºŒæ­¥éªŒè¯å¯†ç            # å¦‚éœ€è¦
/listusers                         # åˆ—å‡ºå·²ç™»å½•è´¦å·
/removeuser åˆ«å                   # ç§»é™¤è´¦å·
```

### ä»»åŠ¡ç®¡ç†
```
/addtask ç›®æ ‡ | CRON | æ–‡æœ¬ | è´¦å·åˆ«å | å¤‡æ³¨
  ç¤ºä¾‹: /addtask @MyCheckinBot | 0 9 * * * | /checkin | myA | æ—©å®‰ç­¾åˆ°

/listtasks                         # åˆ—å‡ºä»»åŠ¡
/deltask ID                        # åˆ é™¤ä»»åŠ¡
/toggle ID                         # å¯ç”¨/åœç”¨ä»»åŠ¡
/test ç›®æ ‡ | æ–‡æœ¬ | è´¦å·åˆ«å        # ç«‹å³æµ‹è¯•ä¸€æ¬¡
```

### çŠ¶æ€ä¸æŸ¥è¯¢
```
/status                            # æŸ¥çœ‹æ‰€æœ‰è´¦å·çŠ¶æ€
/me åˆ«å                           # æŸ¥çœ‹æŸä¸ªè´¦å·ä¿¡æ¯
/whois ç›®æ ‡                        # è§£æç›®æ ‡ä¿¡æ¯
```

---

## â± CRON è¡¨è¾¾å¼

æ‰€æœ‰å®šæ—¶ä»»åŠ¡ä½¿ç”¨ **ä¸Šæµ·æ—¶åŒº (Asia/Shanghai)**ï¼Œç¤ºä¾‹ï¼š
- `0 9 * * *` â†’ æ¯å¤©æ—©ä¸Š 09:00  
- `*/10 * * * *` â†’ æ¯ 10 åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡  

---

## ğŸ—‚ æ•°æ®ç›®å½•

æœåŠ¡å®‰è£…è·¯å¾„ï¼š`/opt/tg-checkin`  

- `main.py`ï¼šä¸»ç¨‹åº  
- `config.json`ï¼šå…¨å±€é…ç½®  
- `accounts.json`ï¼šè´¦å·æ¸…å•ï¼ˆåˆ«å â†’ session æ–‡ä»¶ï¼‰  
- `tasks.json`ï¼šä»»åŠ¡é…ç½®  
- `user-<alias>.session`ï¼šä¸ªäººè´¦å·ä¼šè¯  
- `bot.session`ï¼šBot ä¼šè¯  

---

## ğŸ§° å¸¸è§é—®é¢˜

1. **æ•°å­— ID æ— æ³•å‘é€æ¶ˆæ¯ï¼Ÿ**  
   - éœ€ç¡®ä¿ä½ çš„ä¸ªäººå·ä¸è¯¥å¯¹è±¡æœ‰è¿‡ä¼šè¯ï¼›  
   - å¦åˆ™è¯·ä½¿ç”¨ `@ç”¨æˆ·å` æˆ– `t.me/é“¾æ¥` æˆ– `-100` å¼€å¤´çš„ç¾¤/é¢‘é“ IDã€‚

2. **æœåŠ¡æ—¥å¿—åœ¨å“ªé‡Œçœ‹ï¼Ÿ**  
   ```bash
   journalctl -u tg-checkin -f
   ```

3. **ä¿®æ”¹é…ç½®åå¦‚ä½•ç”Ÿæ•ˆï¼Ÿ**  
   - ç”¨ `manage.sh restart` é‡å¯æœåŠ¡ã€‚

---

## âŒ å¸è½½

```bash
sudo bash uninstall.sh
```

ä¼šç§»é™¤ systemd æœåŠ¡ï¼Œåˆ é™¤ `/opt/tg-checkin` ä¸ç”¨æˆ· `tgcheckin`ã€‚  
å¦‚è¦ä¿ç•™æ•°æ®ï¼Œå¯æ‰‹åŠ¨å¤‡ä»½ `config.json / tasks.json / accounts.json / *.session`ã€‚

---

## ğŸ“œ License

MIT
